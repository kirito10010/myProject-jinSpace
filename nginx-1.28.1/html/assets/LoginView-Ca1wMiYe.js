import{d as y,c as O,a as o,b as s,w as l,r,o as h,u as x,e as g,f as C,l as N,g as w,h as v,i as R,E as m}from"./index-CkZMlezH.js";import{l as B}from"./auth-DFDB4IRB.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-BYh0DQqL.js";import"./index-B9ygI19o.js";const I={class:"login-container"},L={class:"login-box"},q={class:"input-wrapper"},S={class:"input-wrapper"},T={class:"login-footer"},U=y({__name:"LoginView",setup(A){const p=x(),n=v(),i=v(!1),t=R({usernameOrEmail:"",password:""}),V={usernameOrEmail:[{required:!0,message:"请输入用户名或邮箱",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},E=async()=>{if(n.value)try{await n.value.validate(),i.value=!0;const a=await B({usernameOrEmail:t.usernameOrEmail,password:t.password});a.success?(m.success("登录成功"),localStorage.setItem("userInfo",JSON.stringify(a.data)),p.push("/home")):m.error(a.message||"登录失败")}catch(a){m.error("登录失败："+(a.message||"未知错误"))}finally{i.value=!1}},b=()=>{p.push("/register")};return(a,e)=>{const c=r("el-icon"),f=r("el-input"),u=r("el-form-item"),_=r("el-button"),k=r("el-form");return h(),O("div",I,[o("div",L,[e[5]||(e[5]=o("div",{class:"login-header"},[o("h1",{class:"login-title"},"欢迎回来"),o("p",{class:"login-subtitle"},"登录您的账号继续访问")],-1)),s(k,{model:t,rules:V,ref_key:"loginFormRef",ref:n,"label-width":"0",class:"login-form"},{default:l(()=>[s(u,{prop:"usernameOrEmail"},{default:l(()=>[o("div",q,[s(c,{class:"input-icon"},{default:l(()=>[s(g(C))]),_:1}),s(f,{modelValue:t.usernameOrEmail,"onUpdate:modelValue":e[0]||(e[0]=d=>t.usernameOrEmail=d),placeholder:"用户名或邮箱",class:"custom-input"},null,8,["modelValue"])])]),_:1}),s(u,{prop:"password"},{default:l(()=>[o("div",S,[s(c,{class:"input-icon"},{default:l(()=>[s(g(N))]),_:1}),s(f,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=d=>t.password=d),type:"password",placeholder:"密码",class:"custom-input","show-password":""},null,8,["modelValue"])])]),_:1}),s(u,null,{default:l(()=>[s(_,{type:"primary",onClick:E,loading:i.value,class:"login-btn"},{default:l(()=>[...e[2]||(e[2]=[w(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",T,[e[4]||(e[4]=o("span",null,"还没有账号？",-1)),s(_,{link:"",class:"register-link",onClick:b},{default:l(()=>[...e[3]||(e[3]=[w("立即注册",-1)])]),_:1})])])])}}}),G=F(U,[["__scopeId","data-v-6f8951e7"]]);export{G as default};
