import{d as Pe,i as z,S as B,k as We,W as Ge,c as L,a as s,b as t,w as l,z as S,C as Q,h as g,E as i,r as c,o as y,g as u,e as I,N as Ke,O as _e,D,H,I as P,X as je,Y as Je,M as xe,K as Xe,V as Ze,Z as De,P as we,L as Qe}from"./index-XKV8mbYI.js";import{i as et,L as he}from"./index-5QPu3XI4.js";import{s as M}from"./request-BYh0DQqL.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B9ygI19o.js";const at=async(b,h)=>M.post("/api/transactions",{...b,userId:h}),Ve=async b=>M.get("/api/transactions",{params:b}),lt=async(b,h)=>M.put(`/api/transactions/${b}`,h),ot=async b=>M.delete(`/api/transactions/${b}`),nt=async b=>M.delete("/api/transactions/batch",{data:b}),st=async b=>M.get("/api/transactions/stats",{params:b}),rt=async b=>M.get("/api/transactions/chart",{params:b}),it={class:"data-finance"},dt={class:"top-bar"},ut={class:"left-section"},pt={class:"time-range-selector"},ct={class:"button-group"},mt={class:"stats-cards"},gt={class:"stat-item"},ft={class:"stat-value income"},vt={class:"stat-item"},yt={class:"stat-value expense"},bt={class:"stat-item"},_t={class:"stat-value balance"},xt={class:"chart-header"},Dt={class:"chart-controls"},wt={class:"chart-container"},ht={class:"timeline-container"},Vt={class:"timeline-header"},Ct={class:"timeline-content"},Rt={class:"timeline-title"},St={class:"timeline-amount expense"},kt={class:"timeline-desc"},Ft={class:"timeline-header"},Tt={class:"timeline-content"},zt={class:"timeline-title"},Ut={class:"timeline-amount income"},It={class:"timeline-desc"},Mt={class:"dialog-footer"},$t={class:"filter-section"},Et={class:"table-actions"},Ot={class:"pagination"},Yt={class:"dialog-footer"},Bt=Pe({__name:"DataFinance",setup(b){const h=g(!1),W=g(!1),N=g(!1),G=g(),ee=g(),f=z({type:"income",amount:"",category:"",description:"",transactionDate:new Date().toISOString().split("T")[0]||""}),d=z({id:0,type:"income",amount:"",category:"",description:"",transactionDate:new Date().toISOString().split("T")[0]||""}),te=[{value:"工资",label:"工资",type:"income"},{value:"奖金",label:"奖金",type:"income"},{value:"投资收益",label:"投资收益",type:"income"},{value:"股票收益",label:"股票收益",type:"income"},{value:"基金收益",label:"基金收益",type:"income"},{value:"兼职收入",label:"兼职收入",type:"income"},{value:"礼金收入",label:"礼金收入",type:"income"},{value:"报销收入",label:"报销收入",type:"income"},{value:"其他收入",label:"其他收入",type:"income"},{value:"餐饮",label:"餐饮",type:"expense"},{value:"早餐",label:"早餐",type:"expense"},{value:"午餐",label:"午餐",type:"expense"},{value:"晚餐",label:"晚餐",type:"expense"},{value:"外卖",label:"外卖",type:"expense"},{value:"聚餐",label:"聚餐",type:"expense"},{value:"交通",label:"交通",type:"expense"},{value:"公交地铁",label:"公交地铁",type:"expense"},{value:"打车",label:"打车",type:"expense"},{value:"加油",label:"加油",type:"expense"},{value:"停车费",label:"停车费",type:"expense"},{value:"购物",label:"购物",type:"expense"},{value:"日用品",label:"日用品",type:"expense"},{value:"服装",label:"服装",type:"expense"},{value:"电子产品",label:"电子产品",type:"expense"},{value:"娱乐",label:"娱乐",type:"expense"},{value:"电影",label:"电影",type:"expense"},{value:"游戏",label:"游戏",type:"expense"},{value:"旅游",label:"旅游",type:"expense"},{value:"医疗",label:"医疗",type:"expense"},{value:"药品",label:"药品",type:"expense"},{value:"检查",label:"检查",type:"expense"},{value:"教育",label:"教育",type:"expense"},{value:"学费",label:"学费",type:"expense"},{value:"书籍",label:"书籍",type:"expense"},{value:"房租",label:"房租",type:"expense"},{value:"水电费",label:"水电费",type:"expense"},{value:"网费",label:"网费",type:"expense"},{value:"物业费",label:"物业费",type:"expense"},{value:"其他支出",label:"其他支出",type:"expense"}],Ce=De(()=>te.filter(o=>o.type===f.type)),Re=De(()=>te.filter(o=>o.type===d.type)),ae=o=>{const e=new Date(o);return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},ce=z({type:[{required:!0,message:"请选择交易类型",trigger:"change"}],amount:[{required:!0,message:"请输入金额",trigger:"blur"},{validator:(o,e,n)=>{const r=typeof e=="string"?parseFloat(e):e;!isNaN(r)&&isFinite(r)&&r>0?n():n(new Error("金额必须大于0"))},trigger:"blur, change"}],category:[{required:!0,message:"请选择分类",trigger:"change"}],transactionDate:[{required:!0,message:"请选择交易日期",trigger:"change"}]}),_=z({category:"",dateRange:[]}),me=g([]),le=g(!1),w=z({current:1,pageSize:10,total:0}),$=g([]),ge=g([]),E=z({prop:"createdAt",order:"descending"}),fe=g(0),ve=g(0),ye=g(0),oe=g([]),ne=g([]),se=g(null);let K=null;const m=z({timeRange:"week",dateRange:[]}),V=g("month"),C=g([]),O=z({dates:[],incomeData:[],expenseData:[]}),Se=()=>{se.value&&(K=et(se.value),window.addEventListener("resize",()=>{K?.resize()}),j())},ke=()=>{m.timeRange!=="custom"&&(m.dateRange=[],j())},Fe=()=>{m.dateRange&&m.dateRange.length===2&&j()},j=async()=>{try{const o=F();if(!o){i.error("请先登录");return}const e={type:"both",userId:o.id};if(m.timeRange==="custom")if(m.dateRange&&m.dateRange.length===2)e.timeRange="custom",e.startDate=m.dateRange[0],e.endDate=m.dateRange[1],console.log("Date range:",m.dateRange),console.log("Params:",e);else return;else e.timeRange=m.timeRange;const n=await rt(e);n.code===200&&n.success?(O.dates=n.data.dates,O.incomeData=n.data.incomeData,O.expenseData=n.data.expenseData,Te()):i.error("获取图表数据失败："+n.message)}catch(o){console.error("获取图表数据失败：",o),i.error("获取图表数据失败")}},Te=()=>{if(!K)return;const o={title:{text:""},tooltip:{trigger:"axis",formatter:function(r){let v=r[0].name+"<br/>";return r.forEach(p=>{v+=`${p.marker} ${p.seriesName}: ¥${p.value.toFixed(2)}<br/>`}),v}},legend:{data:[],top:10},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:O.dates},yAxis:{type:"value",axisLabel:{formatter:"¥{value}"}},series:[]},e=o.legend,n=o.series;e.data.push("收入"),n.push({name:"收入",type:"line",data:O.incomeData,smooth:!0,itemStyle:{color:"#67c23a"},areaStyle:{color:new he(0,0,0,1,[{offset:0,color:"rgba(103, 194, 58, 0.5)"},{offset:1,color:"rgba(103, 194, 58, 0.1)"}])}}),e.data.push("支出"),n.push({name:"支出",type:"line",data:O.expenseData,smooth:!0,itemStyle:{color:"#f56c6c"},areaStyle:{color:new he(0,0,0,1,[{offset:0,color:"rgba(245, 108, 108, 0.5)"},{offset:1,color:"rgba(245, 108, 108, 0.1)"}])}}),K.setOption(o)},k=async()=>{try{const o=F();if(!o){i.error("请先登录");return}const e={userId:o.id};if(V.value==="custom")if(C.value&&C.value.length===2)e.startDate=C.value[0],e.endDate=C.value[1];else return;else if(V.value==="week"){const r=new Date,v=new Date(r),p=r.getDay(),T=r.getDate()-p+(p===0?-6:1);v.setDate(T),v.setHours(0,0,0,0);const Y=new Date(v);Y.setDate(v.getDate()+6),Y.setHours(23,59,59,999),e.startDate=v.toISOString().split("T")[0],e.endDate=Y.toISOString().split("T")[0]}else if(V.value==="month"){const r=new Date,v=new Date(r.getFullYear(),r.getMonth(),1),p=new Date(r.getFullYear(),r.getMonth()+1,0);e.startDate=v.toISOString().split("T")[0],e.endDate=p.toISOString().split("T")[0]}console.log("Stats params:",e);const n=await st(e);n.code===200&&n.success?(fe.value=n.data.totalIncome,ve.value=n.data.totalExpense,ye.value=n.data.balance,console.log("Stats data:",n.data)):i.error("获取交易统计数据失败："+(n.message||"未知错误"))}catch(o){console.error("获取交易统计数据失败：",o);const e=o instanceof Error?o.message:"网络错误";i.error("获取交易统计数据失败："+e)}},A=async()=>{try{const o=F();if(!o){i.error("请先登录");return}const e=await Ve({page:1,pageSize:20,type:void 0,userId:o.id});if(e.code===200&&e.success){const n=e.data.records;oe.value=n.filter(r=>r.type==="expense").map(r=>({date:ae(r.transactionDate),category:r.category,amount:r.amount,description:r.description})),ne.value=n.filter(r=>r.type==="income").map(r=>({date:ae(r.transactionDate),category:r.category,amount:r.amount,description:r.description}))}else i.error("获取交易记录失败："+e.message)}catch(o){console.error("获取交易记录失败：",o),i.error("获取交易记录失败")}},ze=async()=>{if(G.value)try{await G.value.validate();const o=F();if(!o){i.error("请先登录");return}const e={...f,amount:parseFloat(f.amount)},n=await at(e,o.id);n.code===200&&n.success?(h.value=!1,G.value.resetFields(),k(),A(),i.success("记账记录添加成功")):i.error("记账失败："+n.message)}catch(o){console.error("记账失败：",o),i.error("记账失败，请稍后重试")}},R=async()=>{try{const o=F();if(!o){i.error("请先登录");return}le.value=!0;const e={page:w.current,pageSize:w.pageSize,userId:o.id};_.category&&(e.category=_.category),_.dateRange&&_.dateRange.length===2&&(e.startDate=_.dateRange[0],e.endDate=_.dateRange[1]),E.prop&&E.order&&(e.sort=E.prop,e.order=E.order==="ascending"?"asc":"desc");const n=await Ve(e);n.code===200&&n.success?(me.value=n.data.records,w.total=n.data.total):i.error("获取记账记录失败："+n.message)}catch(o){console.error("获取记账记录失败：",o),i.error("获取记账记录失败")}finally{le.value=!1}},re=()=>{w.current=1,R()},Ue=()=>{_.category="",_.dateRange=[],w.current=1,R()},Ie=o=>{E.prop=o.prop,E.order=o.order,R()},Me=o=>{w.pageSize=o,R()},$e=o=>{w.current=o,R()},Ee=o=>{ge.value=o,$.value=o.map(e=>e.id)},Oe=o=>{d.id=o.id,d.type=o.type,d.amount=o.amount,d.category=o.category,d.description=o.description,d.transactionDate=o.transactionDate,N.value=!0},Ye=o=>{we.confirm("确定要删除这条记账记录吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{if(!F()){i.error("请先登录");return}const n=await ot(o);n.code===200&&n.success?(R(),k(),A(),i.success("删除成功")):i.error("删除失败："+n.message)}catch(e){console.error("删除失败：",e),i.error("删除失败")}}).catch(()=>{})},Be=()=>{if($.value.length===0){i.warning("请选择要删除的记录");return}we.confirm(`确定要删除选中的 ${$.value.length} 条记账记录吗？`,"批量删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{if(!F()){i.error("请先登录");return}const e=await nt($.value);e.code===200&&e.success?(R(),k(),A(),$.value=[],ge.value=[],i.success("批量删除成功")):i.error("批量删除失败："+e.message)}catch(o){console.error("批量删除失败：",o),i.error("批量删除失败")}}).catch(()=>{})},Le=async()=>{if(ee.value)try{if(await ee.value.validate(),!F()){i.error("请先登录");return}const e=await lt(d.id,{type:d.type,amount:parseFloat(d.amount),category:d.category,description:d.description,transactionDate:d.transactionDate});e.code===200&&e.success?(N.value=!1,R(),k(),A(),i.success("记账记录更新成功")):i.error("更新失败："+e.message)}catch(o){console.error("更新失败：",o),i.error("更新失败，请稍后重试")}};B(()=>W.value,o=>{o&&R()});const F=()=>{const o=localStorage.getItem("userInfo");return o?JSON.parse(o):null};return We(()=>{k(),A(),Ge(()=>{Se()})}),B(()=>m.timeRange,()=>{j()},{deep:!0}),B(()=>f.type,()=>{f.category=""}),B(()=>d.type,()=>{d.category=""}),B(()=>V.value,()=>{V.value!=="custom"&&(C.value=[],k())}),B(()=>C.value,()=>{V.value==="custom"&&C.value.length===2&&k()},{deep:!0}),(o,e)=>{const n=c("el-radio-button"),r=c("el-radio-group"),v=c("el-date-picker"),p=c("el-button"),T=c("el-card"),Y=c("el-icon"),J=c("el-timeline-item"),be=c("el-timeline"),X=c("el-radio"),x=c("el-form-item"),Z=c("el-input"),ie=c("el-option"),de=c("el-select"),ue=c("el-form"),pe=c("el-dialog"),U=c("el-table-column"),Ne=c("el-tag"),Ae=c("el-table"),qe=c("el-pagination"),He=Qe("loading");return y(),L("div",it,[s("div",dt,[s("div",ut,[e[28]||(e[28]=s("h2",null,"财务台账",-1)),s("div",pt,[t(r,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),size:"small"},{default:l(()=>[t(n,{label:"week"},{default:l(()=>[...e[25]||(e[25]=[u("本周",-1)])]),_:1}),t(n,{label:"month"},{default:l(()=>[...e[26]||(e[26]=[u("本月",-1)])]),_:1}),t(n,{label:"custom"},{default:l(()=>[...e[27]||(e[27]=[u("自定义",-1)])]),_:1})]),_:1},8,["modelValue"]),V.value==="custom"?(y(),S(v,{key:0,modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=a=>C.value=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","value-format":"YYYY-MM-DD",onChange:k,style:{"margin-left":"10px"}},null,8,["modelValue"])):Q("",!0)])]),s("div",ct,[t(p,{type:"primary",onClick:e[2]||(e[2]=a=>h.value=!0)},{icon:l(()=>[t(I(Ke))]),default:l(()=>[e[29]||(e[29]=u(" 记账 ",-1))]),_:1}),t(p,{type:"success",onClick:e[3]||(e[3]=a=>W.value=!0)},{icon:l(()=>[t(I(_e))]),default:l(()=>[e[30]||(e[30]=u(" 管理记账记录 ",-1))]),_:1})])]),s("div",mt,[t(T,{shadow:"hover",class:"stat-card"},{default:l(()=>[s("div",gt,[e[31]||(e[31]=s("div",{class:"stat-label"},"总收入",-1)),s("div",ft,"¥"+D(fe.value.toFixed(2)),1)])]),_:1}),t(T,{shadow:"hover",class:"stat-card"},{default:l(()=>[s("div",vt,[e[32]||(e[32]=s("div",{class:"stat-label"},"总支出",-1)),s("div",yt,"¥"+D(ve.value.toFixed(2)),1)])]),_:1}),t(T,{shadow:"hover",class:"stat-card"},{default:l(()=>[s("div",bt,[e[33]||(e[33]=s("div",{class:"stat-label"},"结余",-1)),s("div",_t,"¥"+D(ye.value.toFixed(2)),1)])]),_:1})]),t(T,{shadow:"hover",class:"chart-card"},{header:l(()=>[s("div",xt,[e[37]||(e[37]=s("span",null,"收支趋势",-1)),s("div",Dt,[t(r,{modelValue:m.timeRange,"onUpdate:modelValue":e[4]||(e[4]=a=>m.timeRange=a),size:"small",onChange:ke},{default:l(()=>[t(n,{label:"week"},{default:l(()=>[...e[34]||(e[34]=[u("本周",-1)])]),_:1}),t(n,{label:"month"},{default:l(()=>[...e[35]||(e[35]=[u("本月",-1)])]),_:1}),t(n,{label:"custom"},{default:l(()=>[...e[36]||(e[36]=[u("自定义",-1)])]),_:1})]),_:1},8,["modelValue"]),m.timeRange==="custom"?(y(),S(v,{key:0,modelValue:m.dateRange,"onUpdate:modelValue":e[5]||(e[5]=a=>m.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small","value-format":"YYYY-MM-DD",onChange:Fe,style:{"margin-left":"10px"}},null,8,["modelValue"])):Q("",!0)])])]),default:l(()=>[s("div",wt,[s("div",{ref_key:"chartRef",ref:se,class:"chart"},null,512)])]),_:1}),s("div",ht,[t(T,{shadow:"hover",class:"timeline-card"},{header:l(()=>[s("div",Vt,[t(Y,null,{default:l(()=>[t(I(je))]),_:1}),e[38]||(e[38]=s("span",null,"支出记录",-1))])]),default:l(()=>[t(be,null,{default:l(()=>[(y(!0),L(H,null,P(oe.value,(a,q)=>(y(),S(J,{key:q,timestamp:a.date,placement:"top"},{default:l(()=>[s("div",Ct,[s("div",Rt,D(a.category),1),s("div",St,"-¥"+D(a.amount.toFixed(2)),1),s("div",kt,D(a.description||"无描述"),1)])]),_:2},1032,["timestamp"]))),128)),oe.value.length===0?(y(),S(J,{key:0,timestamp:"暂无数据"},{default:l(()=>[...e[39]||(e[39]=[s("div",{class:"timeline-empty"},"暂无支出记录",-1)])]),_:1})):Q("",!0)]),_:1})]),_:1}),t(T,{shadow:"hover",class:"timeline-card"},{header:l(()=>[s("div",Ft,[t(Y,null,{default:l(()=>[t(I(Je))]),_:1}),e[40]||(e[40]=s("span",null,"收入记录",-1))])]),default:l(()=>[t(be,null,{default:l(()=>[(y(!0),L(H,null,P(ne.value,(a,q)=>(y(),S(J,{key:q,timestamp:a.date,placement:"top"},{default:l(()=>[s("div",Tt,[s("div",zt,D(a.category),1),s("div",Ut,"+¥"+D(a.amount.toFixed(2)),1),s("div",It,D(a.description||"无描述"),1)])]),_:2},1032,["timestamp"]))),128)),ne.value.length===0?(y(),S(J,{key:0,timestamp:"暂无数据"},{default:l(()=>[...e[41]||(e[41]=[s("div",{class:"timeline-empty"},"暂无收入记录",-1)])]),_:1})):Q("",!0)]),_:1})]),_:1})]),t(pe,{modelValue:h.value,"onUpdate:modelValue":e[12]||(e[12]=a=>h.value=a),title:"添加记账记录",width:"500px"},{footer:l(()=>[s("span",Mt,[t(p,{onClick:e[11]||(e[11]=a=>h.value=!1)},{default:l(()=>[...e[45]||(e[45]=[u("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:ze},{default:l(()=>[...e[46]||(e[46]=[u("确定",-1)])]),_:1})])]),default:l(()=>[t(ue,{ref_key:"addFormRef",ref:G,model:f,rules:ce,"label-width":"100px"},{default:l(()=>[t(x,{label:"交易类型",prop:"type"},{default:l(()=>[t(r,{modelValue:f.type,"onUpdate:modelValue":e[6]||(e[6]=a=>f.type=a)},{default:l(()=>[t(X,{label:"income"},{default:l(()=>[...e[42]||(e[42]=[u("收入",-1)])]),_:1}),t(X,{label:"expense"},{default:l(()=>[...e[43]||(e[43]=[u("支出",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"金额",prop:"amount"},{default:l(()=>[t(Z,{modelValue:f.amount,"onUpdate:modelValue":e[7]||(e[7]=a=>f.amount=a),placeholder:"请输入金额",type:"number",precision:2,step:.01},{prepend:l(()=>[...e[44]||(e[44]=[u("¥",-1)])]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"分类",prop:"category"},{default:l(()=>[t(de,{modelValue:f.category,"onUpdate:modelValue":e[8]||(e[8]=a=>f.category=a),placeholder:"请选择分类",clearable:""},{default:l(()=>[(y(!0),L(H,null,P(Ce.value,a=>(y(),S(ie,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"描述",prop:"description"},{default:l(()=>[t(Z,{modelValue:f.description,"onUpdate:modelValue":e[9]||(e[9]=a=>f.description=a),placeholder:"请输入描述（可选）",type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),t(x,{label:"交易日期",prop:"transactionDate"},{default:l(()=>[t(v,{modelValue:f.transactionDate,"onUpdate:modelValue":e[10]||(e[10]=a=>f.transactionDate=a),type:"date",placeholder:"选择交易日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),t(pe,{modelValue:W.value,"onUpdate:modelValue":e[24]||(e[24]=a=>W.value=a),title:"管理记账记录",width:"90%","max-width":"1200px"},{default:l(()=>[s("div",$t,[t(ue,{inline:!0,model:_,class:"filter-form"},{default:l(()=>[t(x,{label:"分类"},{default:l(()=>[t(de,{modelValue:_.category,"onUpdate:modelValue":e[13]||(e[13]=a=>_.category=a),placeholder:"请选择分类",clearable:"",onChange:re,style:{width:"150px"}},{default:l(()=>[(y(),L(H,null,P(te,a=>t(ie,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"日期范围"},{default:l(()=>[t(v,{modelValue:_.dateRange,"onUpdate:modelValue":e[14]||(e[14]=a=>_.dateRange=a),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:re},null,8,["modelValue"])]),_:1}),t(x,null,{default:l(()=>[t(p,{type:"primary",onClick:re},{default:l(()=>[...e[47]||(e[47]=[u("查询",-1)])]),_:1}),t(p,{onClick:Ue},{default:l(()=>[...e[48]||(e[48]=[u("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),s("div",Et,[t(p,{type:"danger",disabled:$.value.length===0,onClick:Be},{icon:l(()=>[t(I(xe))]),default:l(()=>[e[49]||(e[49]=u(" 批量删除 ",-1))]),_:1},8,["disabled"])]),Xe((y(),S(Ae,{data:me.value,style:{width:"100%"},onSelectionChange:Ee,onSortChange:Ie},{default:l(()=>[t(U,{type:"selection",width:"55"}),t(U,{prop:"transactionDate",label:"交易日期",sortable:"custom",width:"120"},{default:l(a=>[u(D(ae(a.row.transactionDate)),1)]),_:1}),t(U,{prop:"type",label:"交易类型",width:"80"},{default:l(a=>[t(Ne,{type:a.row.type==="income"?"success":"danger"},{default:l(()=>[u(D(a.row.type==="income"?"收入":"支出"),1)]),_:2},1032,["type"])]),_:1}),t(U,{prop:"category",label:"分类",width:"100"}),t(U,{prop:"amount",label:"金额",width:"120"},{default:l(a=>[s("span",{class:Ze(a.row.type==="income"?"income-amount":"expense-amount")},D(a.row.type==="income"?"+":"-")+"¥"+D(a.row.amount.toFixed(2)),3)]),_:1}),t(U,{prop:"description",label:"描述","min-width":"200"}),t(U,{label:"操作",width:"200"},{default:l(a=>[t(p,{type:"primary",size:"small",onClick:q=>Oe(a.row)},{icon:l(()=>[t(I(_e))]),default:l(()=>[e[50]||(e[50]=u(" 修改 ",-1))]),_:1},8,["onClick"]),t(p,{type:"danger",size:"small",onClick:q=>Ye(a.row.id)},{icon:l(()=>[t(I(xe))]),default:l(()=>[e[51]||(e[51]=u(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[He,le.value]]),s("div",Ot,[t(qe,{"current-page":w.current,"onUpdate:currentPage":e[15]||(e[15]=a=>w.current=a),"page-size":w.pageSize,"onUpdate:pageSize":e[16]||(e[16]=a=>w.pageSize=a),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:w.total,onSizeChange:Me,onCurrentChange:$e},null,8,["current-page","page-size","total"])]),t(pe,{modelValue:N.value,"onUpdate:modelValue":e[23]||(e[23]=a=>N.value=a),title:"修改记账记录",width:"500px"},{footer:l(()=>[s("span",Yt,[t(p,{onClick:e[22]||(e[22]=a=>N.value=!1)},{default:l(()=>[...e[55]||(e[55]=[u("取消",-1)])]),_:1}),t(p,{type:"primary",onClick:Le},{default:l(()=>[...e[56]||(e[56]=[u("确定",-1)])]),_:1})])]),default:l(()=>[t(ue,{ref_key:"editFormRef",ref:ee,model:d,rules:ce,"label-width":"100px"},{default:l(()=>[t(x,{label:"交易类型",prop:"type"},{default:l(()=>[t(r,{modelValue:d.type,"onUpdate:modelValue":e[17]||(e[17]=a=>d.type=a)},{default:l(()=>[t(X,{label:"income"},{default:l(()=>[...e[52]||(e[52]=[u("收入",-1)])]),_:1}),t(X,{label:"expense"},{default:l(()=>[...e[53]||(e[53]=[u("支出",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"金额",prop:"amount"},{default:l(()=>[t(Z,{modelValue:d.amount,"onUpdate:modelValue":e[18]||(e[18]=a=>d.amount=a),placeholder:"请输入金额",type:"number",precision:2,step:.01},{prepend:l(()=>[...e[54]||(e[54]=[u("¥",-1)])]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"分类",prop:"category"},{default:l(()=>[t(de,{modelValue:d.category,"onUpdate:modelValue":e[19]||(e[19]=a=>d.category=a),placeholder:"请选择分类",clearable:""},{default:l(()=>[(y(!0),L(H,null,P(Re.value,a=>(y(),S(ie,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(x,{label:"描述",prop:"description"},{default:l(()=>[t(Z,{modelValue:d.description,"onUpdate:modelValue":e[20]||(e[20]=a=>d.description=a),placeholder:"请输入描述（可选）",type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),t(x,{label:"交易日期",prop:"transactionDate"},{default:l(()=>[t(v,{modelValue:d.transactionDate,"onUpdate:modelValue":e[21]||(e[21]=a=>d.transactionDate=a),type:"date",placeholder:"选择交易日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}}),Pt=tt(Bt,[["__scopeId","data-v-4837960e"]]);export{Pt as default};
