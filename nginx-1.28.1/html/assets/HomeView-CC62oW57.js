import{d as j,k as K,c as I,b as e,w as l,h as b,r as o,o as k,a,g as i,e as u,n as P,p as Q,q as W,s as X,t as C,v as Y,x as Z,y as w,z as h,f as T,A as F,B as ee,C as le,D as te,F as ne,G as oe,H as ae,I as ue,J as se,E as c,u as de}from"./index-CkZMlezH.js";import{s as re}from"./feedback-DqCYuekG.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-BYh0DQqL.js";import"./index-B9ygI19o.js";const ie="/vite.png",me={class:"common-layout"},_e={class:"header-right"},pe={class:"user-info"},ce={class:"dialog-footer"},ve=j({__name:"HomeView",setup(be){const N=de(),S=se(),_=b({username:"",nickname:"",role:3}),m=b(!1),s=b({content:"",contact:"",feedbackType:1}),U=[{label:"建议",value:1},{label:"问题",value:2},{label:"投诉",value:3},{label:"其他",value:4}];K(()=>{const f=localStorage.getItem("userInfo");f&&(_.value=JSON.parse(f))});const B=()=>{m.value=!0},D=async()=>{if(!s.value.content.trim()){c.warning("请输入反馈内容");return}try{const f=localStorage.getItem("userInfo");if(!f){c.error("用户信息不存在，请先登录");return}const n={uid:JSON.parse(f).id,content:s.value.content,contact:s.value.contact,feedbackType:s.value.feedbackType};await re(n),m.value=!1,c.success("反馈提交成功"),s.value={content:"",contact:"",feedbackType:1}}catch(f){console.error("反馈提交失败:",f),c.error("反馈提交失败，请稍后重试")}},E=()=>{localStorage.removeItem("userInfo"),N.push("/login")};return(f,t)=>{const n=o("el-icon"),r=o("el-menu-item"),p=o("el-sub-menu"),H=o("el-menu"),J=o("el-aside"),g=o("el-dropdown-item"),L=o("el-dropdown-menu"),O=o("el-dropdown"),z=o("el-header"),M=o("router-view"),R=o("el-main"),x=o("el-container"),$=o("el-option"),q=o("el-select"),v=o("el-form-item"),y=o("el-input"),A=o("el-form"),V=o("el-button"),G=o("el-dialog");return k(),I("div",me,[e(x,null,{default:l(()=>[e(J,{width:"200px"},{default:l(()=>[t[19]||(t[19]=a("div",{class:"sidebar-header"},[a("img",{src:ie,alt:"Logo",class:"sidebar-logo"}),i(" 拾光瓶 ")],-1)),e(H,{"default-active":u(S).path,class:"sidebar-menu",router:""},{default:l(()=>[e(p,{index:"/home/resource"},{title:l(()=>[e(n,null,{default:l(()=>[e(u(X))]),_:1}),t[5]||(t[5]=a("span",null,"资源中心站",-1))]),default:l(()=>[e(r,{index:"/home/resource/url"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(P))]),_:1}),t[6]||(t[6]=a("span",null,"网址链接",-1))]),_:1}),e(r,{index:"/home/resource/exe"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Q))]),_:1}),t[7]||(t[7]=a("span",null,"安装程序",-1))]),_:1}),e(r,{index:"/home/resource/zip"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(W))]),_:1}),t[8]||(t[8]=a("span",null,"压缩文件",-1))]),_:1})]),_:1}),e(p,{index:"/home/tools"},{title:l(()=>[e(n,null,{default:l(()=>[e(u(C))]),_:1}),t[9]||(t[9]=a("span",null,"万能工具集",-1))]),default:l(()=>[e(r,{index:"/home/tools/weather"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(C))]),_:1}),t[10]||(t[10]=a("span",null,"天气查询",-1))]),_:1}),e(r,{index:"/home/tools/music"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Y))]),_:1}),t[11]||(t[11]=a("span",null,"音乐解析",-1))]),_:1})]),_:1}),e(p,{index:"/home/data"},{title:l(()=>[e(n,null,{default:l(()=>[e(u(w))]),_:1}),t[12]||(t[12]=a("span",null,"数据总控台",-1))]),default:l(()=>[e(r,{index:"/home/data/finance"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(Z))]),_:1}),t[13]||(t[13]=a("span",null,"财务台账",-1))]),_:1}),e(r,{index:"/home/data/statistics"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(w))]),_:1}),t[14]||(t[14]=a("span",null,"绩效记录",-1))]),_:1}),e(r,{index:"/home/data/performance"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(w))]),_:1}),t[15]||(t[15]=a("span",null,"绩效看板",-1))]),_:1})]),_:1}),_.value.role===1?(k(),h(p,{key:0,index:"/home/admin"},{title:l(()=>[e(n,null,{default:l(()=>[e(u(ee))]),_:1}),t[16]||(t[16]=a("span",null,"管理员后台",-1))]),default:l(()=>[e(r,{index:"/home/admin/user-management"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(T))]),_:1}),t[17]||(t[17]=a("span",null,"用户管理",-1))]),_:1}),e(r,{index:"/home/admin/feedback"},{default:l(()=>[e(n,null,{default:l(()=>[e(u(F))]),_:1}),t[18]||(t[18]=a("span",null,"意见反馈",-1))]),_:1})]),_:1})):le("",!0)]),_:1},8,["default-active"])]),_:1}),e(x,null,{default:l(()=>[e(z,null,{default:l(()=>[a("div",_e,[e(O,{trigger:"click"},{dropdown:l(()=>[e(L,null,{default:l(()=>[e(g,{onClick:B},{default:l(()=>[e(n,null,{default:l(()=>[e(u(F))]),_:1}),t[20]||(t[20]=i(" 问题反馈 ",-1))]),_:1}),e(g,{onClick:E},{default:l(()=>[e(n,null,{default:l(()=>[e(u(oe))]),_:1}),t[21]||(t[21]=i(" 退出登录 ",-1))]),_:1})]),_:1})]),default:l(()=>[a("span",pe,[e(n,{class:"user-icon"},{default:l(()=>[e(u(T))]),_:1}),i(" "+te(_.value.nickname||_.value.username)+" ",1),e(n,{class:"arrow-down"},{default:l(()=>[e(u(ne))]),_:1})])]),_:1})])]),_:1}),e(R,null,{default:l(()=>[e(M)]),_:1})]),_:1})]),_:1}),e(G,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=d=>m.value=d),title:"问题反馈",width:"500px"},{footer:l(()=>[a("span",ce,[e(V,{onClick:t[3]||(t[3]=d=>m.value=!1)},{default:l(()=>[...t[22]||(t[22]=[i("取消",-1)])]),_:1}),e(V,{type:"primary",onClick:D},{default:l(()=>[...t[23]||(t[23]=[i("提交",-1)])]),_:1})])]),default:l(()=>[e(A,{model:s.value,"label-width":"80px"},{default:l(()=>[e(v,{label:"反馈类型"},{default:l(()=>[e(q,{modelValue:s.value.feedbackType,"onUpdate:modelValue":t[0]||(t[0]=d=>s.value.feedbackType=d),placeholder:"请选择反馈类型"},{default:l(()=>[(k(),I(ae,null,ue(U,d=>e($,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"反馈内容"},{default:l(()=>[e(y,{modelValue:s.value.content,"onUpdate:modelValue":t[1]||(t[1]=d=>s.value.content=d),type:"textarea",rows:5,placeholder:"请输入反馈内容"},null,8,["modelValue"])]),_:1}),e(v,{label:"联系方式"},{default:l(()=>[e(y,{modelValue:s.value.contact,"onUpdate:modelValue":t[2]||(t[2]=d=>s.value.contact=d),placeholder:"请输入邮箱或手机号"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Ve=fe(ve,[["__scopeId","data-v-7d5e1eff"]]);export{Ve as default};
